<% content_for :title, "Write New Post" %>

<div class="post-form">
  <nav class="breadcrumb">
    <%= link_to "← All Posts", posts_path %>
  </nav>
  
  <h1>Write New Post</h1>
  
  <%= form_with model: @post, local: true, class: "post-form-content" do |form| %>
    <% if @post.errors.any? %>
      <div class="error-messages">
        <h3><%= pluralize(@post.errors.count, "error") %> prohibited this post from being saved:</h3>
        <ul>
          <% @post.errors.full_messages.each do |message| %>
            <li><%= message %></li>
          <% end %>
        </ul>
      </div>
    <% end %>

    <div class="form-group">
      <%= form.label :title, class: "form-label" %>
      <%= form.text_field :title, class: "form-control", placeholder: "Enter your post title..." %>
    </div>

    <div class="form-group">
      <%= form.label :author, class: "form-label" %>
      <%= form.text_field :author, class: "form-control", placeholder: "Your name..." %>
    </div>

    <div class="form-group">
      <%= form.label :labels, "Labels (comma-separated)", class: "form-label" %>
      <%= form.text_field :labels, 
          value: (@post.labels || []).join(', '), 
          class: "form-control", 
          placeholder: "e.g. tech, tutorial, announcement",
          id: "labels_input" %>
      <small class="form-text">Enter labels separated by commas</small>
    </div>

    <div class="form-group">
      <%= form.label :content, class: "form-label" %>
      <%= form.text_area :content, class: "form-control", rows: 15, placeholder: "Write your post content here..." %>
    </div>

    <div class="form-actions">
      <%= form.submit "Save as Draft", class: "btn btn-primary" %>
      <%= link_to "Cancel", posts_path, class: "btn btn-secondary" %>
    </div>
  <% end %>
</div>

<style>
  .post-form {
    max-width: 700px;
    margin: 0 auto;
    padding: 20px;
  }
  
  .breadcrumb {
    margin-bottom: 30px;
  }
  
  .breadcrumb a {
    color: #0066cc;
    text-decoration: none;
  }
  
  .post-form h1 {
    margin-bottom: 30px;
    color: #333;
  }
  
  .error-messages {
    background: #f8d7da;
    color: #721c24;
    padding: 15px;
    border-radius: 4px;
    margin-bottom: 20px;
  }
  
  .error-messages h3 {
    margin: 0 0 10px 0;
    font-size: 16px;
  }
  
  .error-messages ul {
    margin: 0;
    padding-left: 20px;
  }
  
  .form-group {
    margin-bottom: 20px;
  }
  
  .form-label {
    display: block;
    margin-bottom: 5px;
    font-weight: bold;
    color: #333;
  }
  
  .form-control {
    width: 100%;
    padding: 10px;
    border: 1px solid #ddd;
    border-radius: 4px;
    font-size: 16px;
    font-family: inherit;
  }
  
  .form-control:focus {
    outline: none;
    border-color: #0066cc;
    box-shadow: 0 0 0 2px rgba(0, 102, 204, 0.2);
  }
  
  textarea.form-control {
    resize: vertical;
    font-family: inherit;
    line-height: 1.5;
  }
  
  .form-actions {
    display: flex;
    gap: 10px;
    margin-top: 30px;
  }
  
  .btn {
    padding: 12px 24px;
    border: none;
    border-radius: 4px;
    text-decoration: none;
    font-size: 16px;
    cursor: pointer;
    display: inline-block;
  }
  
  .btn-primary {
    background: #0066cc;
    color: white;
  }
  
  .btn-secondary {
    background: #6c757d;
    color: white;
  }
</style>
